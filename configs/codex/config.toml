# Default Codex CLI UI config for agent-sandbox.
# start.sh installs this on first run and injects status_line for legacy homes.

# Keep shell execution unblocked in this externally sandboxed container.
# This prevents subagent/explorer permission dead-ends caused by CLI prompts.
approval_policy = "never"
sandbox_mode = "danger-full-access"

[projects."/workspace"]
# Trust the mounted workspace root so child agents can inspect any project
# placed under /workspace without interactive trust bootstrap.
trust_level = "trusted"

[tui]
# Compact, high-signal status line for day-to-day coding sessions.
# Codex currently exposes built-in status items only, so we combine varied
# items to get a richer, more colorful line without custom ANSI overrides.
status_line = [
  "model-with-reasoning",
  "current-dir",
  "git-branch",
  "context-used",
  "total-input-tokens",
  "total-output-tokens",
  "five-hour-limit",
  "weekly-limit",
]

[features]
# Enable built-in undo support (ghost commit based recovery).
undo = true

# Enable experimental multi-agent orchestration in TUI (/experimental menu).
multi_agent = true

# Enable ChatGPT Apps/Connectors integration via "$" mentions.
apps = true

[agents]
# Codex default is 6. Raise to 12 for faster parallel task fan-out.
max_threads = 12

# Built-in role quick reference:
# - default: mixed tasks
# - explorer: codebase research and risk mapping (no edits)
# - worker: coding + bug fixes + tests
#
# Custom role example:
# [agents.fast_worker]
# description = "Fast scoped implementation agent."
# config_file = "/home/sandbox/.codex/agents/fast_worker.toml"
#
# ~/.codex/agents/fast_worker.toml
# model = "gpt-5.3-spark"
# model_reasoning_effort = "low"
# model_verbosity = "low"
